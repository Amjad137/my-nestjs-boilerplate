{"openapi":"3.0.0","paths":{"/api/v1/auth/login":{"post":{"operationId":"AuthController_login_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"User logged in successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}}},"summary":"User login","tags":["Auth"]}},"/api/v1/auth/register":{"post":{"operationId":"AuthController_register_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}}},"summary":"User register","tags":["Auth"]}},"/api/v1/auth/refresh":{"post":{"operationId":"AuthController_refresh_v1","parameters":[],"responses":{"200":{"description":"User refresh token successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}}},"summary":"User refresh token","tags":["Auth"]}},"/api/v1/auth/me":{"get":{"operationId":"AuthController_getProfile_v1","parameters":[],"responses":{"200":{"description":"User profile retrieved successfully"}},"security":[{"bearer":[]}],"summary":"Get current user profile","tags":["Auth"]}},"/api/v1/auth/logout":{"post":{"operationId":"AuthController_logout_v1","parameters":[],"responses":{"200":{"description":"Logout successful"}},"security":[{"bearer":[]}],"summary":"User logout","tags":["Auth"]}},"/api/v1/auth/change-password":{"post":{"operationId":"AuthController_changePassword_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":"Password changed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponseDto"}}}},"401":{"description":"Current password is incorrect"}},"security":[{"bearer":[]}],"summary":"Change user password","tags":["Auth"]}},"/api/v1/auth/forgot-password":{"post":{"operationId":"AuthController_forgotPassword_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordDto"}}}},"responses":{"200":{"description":"Password reset request processed","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"If the email exists, a password reset link has been sent"},"resetUrl":{"type":"string","example":"(Dev mode only) http://localhost:3000/reset-password?token=1234567890"}}}}}}},"summary":"Request password reset","tags":["Auth"]}},"/api/v1/auth/reset-password":{"post":{"operationId":"AuthController_resetPassword_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"Password reset successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponseDto"}}}},"401":{"description":"Invalid or expired reset token"}},"summary":"Reset password with token","tags":["Auth"]}},"/api/v1/users/me":{"patch":{"operationId":"UserController_updateProfile_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update current user profile","tags":["Users"]}},"/api/v1/users/me/change-password":{"patch":{"operationId":"UserController_changeMyPassword_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"204":{"description":"Password changed successfully"},"400":{"description":"Current password is incorrect"}},"security":[{"bearer":[]}],"summary":"Change current user password","tags":["Users"]}},"/api/v1/users":{"post":{"operationId":"UserController_create_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"409":{"description":"User with this email already exists"}},"security":[{"bearer":[]}],"summary":"Create a new user (admin only)","tags":["Users"]}},"/api/v1/users/admin/all":{"get":{"operationId":"UserController_findAllAdmin_v1","parameters":[{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search_key","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"john","type":"string"}},{"name":"sort_by","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string"}},{"name":"sort_order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","example":"desc","type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"Users retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}},"pagination":{"type":"object","properties":{"page":{"type":"number"},"limit":{"type":"number"},"total":{"type":"number"},"totalPages":{"type":"number"},"hasNext":{"type":"boolean"},"hasPrev":{"type":"boolean"}}}}}}}}},"security":[{"bearer":[]}],"summary":"Get all users with pagination (admin only)","tags":["Users"]}},"/api/v1/users/admin/{id}":{"get":{"operationId":"UserController_findOneAdmin_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"404":{"description":"User not found"}},"security":[{"bearer":[]}],"summary":"Get user by ID (admin only)","tags":["Users"]},"patch":{"operationId":"UserController_updateAdmin_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"404":{"description":"User not found"}},"security":[{"bearer":[]}],"summary":"Update any user (admin only)","tags":["Users"]},"delete":{"operationId":"UserController_removeAdmin_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"User deleted successfully"},"404":{"description":"User not found"}},"security":[{"bearer":[]}],"summary":"Delete user (admin only)","tags":["Users"]}},"/api/v1/posts/published":{"get":{"operationId":"PostController_findPublished_v1","parameters":[{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search_key","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"john","type":"string"}},{"name":"sort_by","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string"}},{"name":"sort_order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","example":"desc","type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"List of published posts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostResponseDto"}}}}}},"summary":"Get published posts (public)","tags":["Posts"]}},"/api/v1/posts/by-slug/{slug}":{"get":{"operationId":"PostController_findBySlug_v1","parameters":[{"name":"slug","required":true,"in":"path","description":"Post slug","schema":{"type":"string"}}],"responses":{"200":{"description":"Post found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostResponseDto"}}}}},"summary":"Get post by slug (public)","tags":["Posts"]}},"/api/v1/posts/my-posts":{"get":{"operationId":"PostController_findMyPosts_v1","parameters":[{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search_key","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"john","type":"string"}},{"name":"sort_by","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string"}},{"name":"sort_order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","example":"desc","type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"User posts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get current user posts","tags":["Posts"]}},"/api/v1/posts":{"post":{"operationId":"PostController_create_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePostDto"}}}},"responses":{"201":{"description":"Post created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Create new post (authenticated users)","tags":["Posts"]}},"/api/v1/posts/{id}":{"put":{"operationId":"PostController_update_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePostDto"}}}},"responses":{"200":{"description":"Post updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update post (author or admin)","tags":["Posts"]},"delete":{"operationId":"PostController_removeSelf_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Post deleted successfully"}},"security":[{"bearer":[]}],"summary":"Delete post (author or admin)","tags":["Posts"]}},"/api/v1/posts/admin/all":{"get":{"operationId":"PostController_findAllAdmin_v1","parameters":[{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search_key","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"john","type":"string"}},{"name":"sort_by","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string"}},{"name":"sort_order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","example":"desc","type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"All posts with pagination","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all posts (admin only)","tags":["Posts"]}},"/api/v1/posts/admin/{id}/publish":{"put":{"operationId":"PostController_publish_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Post published successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Publish post (admin only)","tags":["Posts"]}},"/api/v1/posts/admin/{id}/unpublish":{"put":{"operationId":"PostController_unpublish_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Post unpublished successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Unpublish post (admin only)","tags":["Posts"]}},"/api/v1/posts/admin/{id}":{"delete":{"operationId":"PostController_remove_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Post deleted successfully"}},"security":[{"bearer":[]}],"summary":"Delete post (admin only)","tags":["Posts"]}},"/api/v1/comments/post/{postId}":{"get":{"operationId":"CommentController_findByPost_v1","parameters":[{"name":"postId","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search_key","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"john","type":"string"}},{"name":"sort_by","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string"}},{"name":"sort_order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","example":"desc","type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"List of approved comments for the post","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponseDto"}}}}}},"summary":"Get comments for a post (public)","tags":["Comments"]}},"/api/v1/comments/post/{postId}/root":{"get":{"operationId":"CommentController_findRootCommentsByPost_v1","parameters":[{"name":"postId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of root comments for the post","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponseDto"}}}}}},"summary":"Get root comments for a post (no parent)","tags":["Comments"]}},"/api/v1/comments/parent/{parentId}/replies":{"get":{"operationId":"CommentController_findRepliesByParent_v1","parameters":[{"name":"parentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of replies to the comment","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponseDto"}}}}}},"summary":"Get replies to a comment","tags":["Comments"]}},"/api/v1/comments/author/{authorId}":{"get":{"operationId":"CommentController_findByAuthor_v1","parameters":[{"name":"authorId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of comments by author","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponseDto"}}}}}},"summary":"Get comments by author","tags":["Comments"]}},"/api/v1/comments/spam":{"get":{"operationId":"CommentController_findSpamComments_v1","parameters":[],"responses":{"200":{"description":"List of spam comments","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get spam comments for review","tags":["Comments"]}},"/api/v1/comments/{id}/replies":{"get":{"operationId":"CommentController_findReplies_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search_key","required":false,"in":"query","description":"Search term to filter results","schema":{"example":"john","type":"string"}},{"name":"sort_by","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string"}},{"name":"sort_order","required":false,"in":"query","description":"Sort order","schema":{"default":"desc","example":"desc","type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"List of replies for the comment","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponseDto"}}}}}},"summary":"Get replies for a comment","tags":["Comments"]}},"/api/v1/comments/{id}":{"get":{"operationId":"CommentController_findOne_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponseDto"}}}},"404":{"description":"Comment not found"}},"summary":"Get comment by ID","tags":["Comments"]},"patch":{"operationId":"CommentController_update_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCommentDto"}}}},"responses":{"200":{"description":"Comment updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponseDto"}}}},"404":{"description":"Comment not found"}},"security":[{"bearer":[]}],"summary":"Update comment","tags":["Comments"]},"delete":{"operationId":"CommentController_remove_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment deleted successfully"},"404":{"description":"Comment not found"}},"security":[{"bearer":[]}],"summary":"Soft delete comment","tags":["Comments"]}},"/api/v1/comments":{"post":{"operationId":"CommentController_create_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentDto"}}}},"responses":{"201":{"description":"Comment created successfully (pending moderation)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Create a new comment","tags":["Comments"]}},"/api/v1/comments/{id}/like":{"patch":{"operationId":"CommentController_like_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment liked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponseDto"}}}}},"summary":"Like comment","tags":["Comments"]}},"/api/v1/comments/{id}/unlike":{"patch":{"operationId":"CommentController_unlike_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment unliked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponseDto"}}}}},"summary":"Unlike comment","tags":["Comments"]}},"/api/v1/comments/{id}/spam":{"patch":{"operationId":"CommentController_markAsSpam_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment marked as spam successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Mark comment as spam","tags":["Comments"]}},"/api/v1/health":{"get":{"operationId":"HealthController_check_v1","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"summary":"Health check","tags":["Health"]}},"/api/v1/likes/post":{"post":{"operationId":"LikeController_likePost_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikePostDto"}}}},"responses":{"201":{"description":"Post liked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeResponseDto"}}}},"409":{"description":"Post already liked"}},"security":[{"accessToken":[]},{"bearer":[]}],"summary":"Like a post","tags":["Likes"]},"delete":{"operationId":"LikeController_unlikePost_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnlikePostDto"}}}},"responses":{"200":{"description":"Post unliked successfully"},"404":{"description":"Like not found"}},"security":[{"accessToken":[]},{"bearer":[]}],"summary":"Unlike a post","tags":["Likes"]}},"/api/v1/likes/comment":{"post":{"operationId":"LikeController_likeComment_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeCommentDto"}}}},"responses":{"201":{"description":"Comment liked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeResponseDto"}}}},"409":{"description":"Comment already liked"}},"security":[{"accessToken":[]},{"bearer":[]}],"summary":"Like a comment","tags":["Likes"]},"delete":{"operationId":"LikeController_unlikeComment_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnlikeCommentDto"}}}},"responses":{"200":{"description":"Comment unliked successfully"},"404":{"description":"Like not found"}},"security":[{"accessToken":[]},{"bearer":[]}],"summary":"Unlike a comment","tags":["Likes"]}},"/api/v1/likes/post/{postId}":{"get":{"operationId":"LikeController_getPostLikes_v1","parameters":[{"name":"postId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Post likes retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LikeResponseDto"}}}}}},"security":[{"accessToken":[]}],"summary":"Get post likes","tags":["Likes"]}},"/api/v1/likes/comment/{commentId}":{"get":{"operationId":"LikeController_getCommentLikes_v1","parameters":[{"name":"commentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment likes retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LikeResponseDto"}}}}}},"security":[{"accessToken":[]}],"summary":"Get comment likes","tags":["Likes"]}},"/api/v1/likes/post/{postId}/count":{"get":{"operationId":"LikeController_getPostLikeCount_v1","parameters":[{"name":"postId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Post like count retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeCountResponseDto"}}}}},"security":[{"accessToken":[]}],"summary":"Get post like count","tags":["Likes"]}},"/api/v1/likes/comment/{commentId}/count":{"get":{"operationId":"LikeController_getCommentLikeCount_v1","parameters":[{"name":"commentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Comment like count retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeCountResponseDto"}}}}},"security":[{"accessToken":[]}],"summary":"Get comment like count","tags":["Likes"]}},"/api/v1/likes/user":{"get":{"operationId":"LikeController_getUserLikes_v1","parameters":[],"responses":{"200":{"description":"User likes retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LikeResponseDto"}}}}}},"security":[{"accessToken":[]}],"summary":"Get user likes","tags":["Likes"]}},"/api/v1/s3/public-upload":{"post":{"description":"Generate presigned URLs for uploading public images (profile pictures, post images)","operationId":"S3Controller_getPublicUploadUrls_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PresignedUrlRequestDto"}}}},"responses":{"201":{"description":"Presigned URLs generated successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicUploadResponseDto"}}}}},"400":{"description":"Invalid request data"}},"security":[{"bearer":[]}],"summary":"Get presigned URLs for public image uploads","tags":["S3"]}},"/api/v1/s3/protected-upload":{"post":{"description":"Generate presigned URLs for uploading secure/private files","operationId":"S3Controller_getSecureUploadUrls_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PresignedUrlRequestDto"}}}},"responses":{"201":{"description":"Presigned URLs generated successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PresignedUrlResponseDto"}}}}},"400":{"description":"Invalid request data"},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Get presigned URLs for secure file uploads","tags":["S3"]}},"/api/v1/s3/files":{"delete":{"description":"Delete multiple files from S3 bucket using their keys","operationId":"S3Controller_deleteFiles_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteFilesRequestDto"}}}},"responses":{"204":{"description":"Files deleted successfully"},"400":{"description":"Invalid request data"},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Delete files from S3","tags":["S3"]}},"/api/v1/s3/file-url/{key}":{"get":{"description":"Get the public URL for a file stored in S3","operationId":"S3Controller_getFileUrl_v1","parameters":[{"name":"key","required":true,"in":"path","schema":{"type":"string"}},{"name":"secure","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"File URL retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUrlResponseDto"}}}},"401":{"description":"Unauthorized"},"404":{"description":"File not found"}},"security":[{"bearer":[]}],"summary":"Get file URL","tags":["S3"]}}},"info":{"title":"APIs Specification","description":"APIs documentation","version":"1.0.0","contact":{}},"tags":[{"name":"Auth","description":"Authentication endpoints"},{"name":"Users","description":"User management endpoints"},{"name":"Posts","description":"Blog post management endpoints"},{"name":"Comments","description":"Comment system endpoints"},{"name":"Health","description":"Health check endpoints"}],"servers":[{"url":"/"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"},"refreshToken":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"john@example.com"},"password":{"type":"string","example":"Test@123"}},"required":["email","password"]},"UserResponseDto":{"type":"object","properties":{"email":{"type":"string","example":"john@example.com"},"phoneNumber":{"type":"string","example":"+1234567890"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"address":{"type":"string","example":"123 Main St, City, Country"},"role":{"type":"string","example":"user","enum":["user","admin"]},"avatar":{"type":"string","example":"https://example.com/avatar.jpg"},"isActive":{"type":"boolean","example":true},"isEmailVerified":{"type":"boolean","example":false},"lastLoginAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z"}},"required":["email","phoneNumber","firstName","lastName","address","role","isActive","isEmailVerified"]},"AuthResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"example":{"_id":"507f1f77bcf86cd799439011","firstName":"John","lastName":"Doe","email":"john@example.com","phoneNumber":"+1234567890","address":"123 Main St, City, Country","role":"user","isActive":true,"isEmailVerified":false,"createdAt":"2024-01-01T00:00:00.000Z","updatedAt":"2024-01-01T00:00:00.000Z"},"allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["accessToken","user"]},"RegisterDto":{"type":"object","properties":{"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"email":{"type":"string","example":"john@example.com"},"phoneNumber":{"type":"string","example":"+1234567890"},"address":{"type":"string","example":"123 Main St, City, Country"},"avatar":{"type":"string","example":"https://example.com/avatar.jpg"},"password":{"type":"string","example":"Test@123","minLength":6}},"required":["firstName","lastName","email","phoneNumber","address","password"]},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","example":"oldTest@123","description":"Current password"},"newPassword":{"type":"string","example":"Test@123","description":"New password (minimum 8 characters)","minLength":8}},"required":["currentPassword","newPassword"]},"PasswordResetResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Password changed successfully","description":"Success message"},"timestamp":{"type":"string","example":"2024-01-15T10:30:00.000Z","description":"Timestamp when password was changed"}},"required":["message","timestamp"]},"ForgotPasswordDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com","description":"User email address"}},"required":["email"]},"ResetPasswordDto":{"type":"object","properties":{"token":{"type":"string","example":"abc123def456","description":"Password reset token"},"newPassword":{"type":"string","example":"Test@123","description":"New password (minimum 8 characters)","minLength":8}},"required":["token","newPassword"]},"UpdateUserDto":{"type":"object","properties":{"passwordResetToken":{"type":"string","example":"abc123def456"},"passwordResetExpires":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z"},"emailVerificationToken":{"type":"string","example":"xyz789"},"salt":{"type":"string","example":"salt123"}}},"CreateUserDto":{"type":"object","properties":{"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"email":{"type":"string","example":"john@example.com"},"phoneNumber":{"type":"string","example":"+1234567890"},"address":{"type":"string","example":"123 Main St, City, Country"},"avatar":{"type":"string","example":"https://example.com/avatar.jpg"},"password":{"type":"string","example":"Test@123","minLength":6},"role":{"type":"string","example":"user","enum":["user","admin"],"description":"User role (admin can only be set by existing admin)","default":"user"}},"required":["firstName","lastName","email","phoneNumber","address","password"]},"PostResponseDto":{"type":"object","properties":{"_id":{"type":"string","example":"507f1f77bcf86cd799439011"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z","description":"Creation date"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z","description":"Last update date"},"createdBy":{"type":"string","example":"507f1f77bcf86cd799439012"},"updatedBy":{"type":"string","example":"507f1f77bcf86cd799439013"},"deleted":{"type":"boolean","example":false},"deletedAt":{"format":"date-time","type":"string","example":"2024-01-02T00:00:00.000Z"},"deletedBy":{"type":"string","example":"507f1f77bcf86cd799439014"},"slug":{"type":"string","description":"Post slug"},"content":{"type":"string","description":"Post content"},"featuredImage":{"type":"string","description":"Featured image URL"},"status":{"type":"string","description":"Post status","enum":["DRAFT","PUBLISHED","ARCHIVED"]},"viewCount":{"type":"number","description":"View count"},"tags":{"description":"Tags","type":"array","items":{"type":"string"}},"author":{"type":"object","description":"Author"},"publishedAt":{"format":"date-time","type":"string","description":"Published date"}},"required":["_id","createdAt","updatedAt","slug","content","status"]},"CreatePostDto":{"type":"object","properties":{"slug":{"type":"string","description":"Post slug (optional, generated if absent)"},"content":{"type":"string","description":"Post content"},"featuredImage":{"type":"string","description":"Featured image URL"},"status":{"type":"string","description":"Post status","enum":["DRAFT","PUBLISHED","ARCHIVED"],"default":"DRAFT"},"tags":{"description":"Tags","type":"array","items":{"type":"string"}}},"required":["slug","content"]},"UpdatePostDto":{"type":"object","properties":{"slug":{"type":"string","description":"Post slug (optional, generated if absent)"},"content":{"type":"string","description":"Post content"},"featuredImage":{"type":"string","description":"Featured image URL"},"status":{"type":"string","description":"Post status","enum":["DRAFT","PUBLISHED","ARCHIVED"],"default":"DRAFT"},"tags":{"description":"Tags","type":"array","items":{"type":"string"}}}},"CommentResponseDto":{"type":"object","properties":{"_id":{"type":"string","example":"507f1f77bcf86cd799439011"},"content":{"type":"string","example":"This is a great post!"},"status":{"type":"string","example":"ACTIVE","enum":["ACTIVE","SPAM"]},"likeCount":{"type":"number","example":0},"replyCount":{"type":"number","example":0},"parent":{"type":"object","example":"507f1f77bcf86cd799439011"},"post":{"type":"object","description":"Post information"},"author":{"type":"object","description":"Author information"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z"}},"required":["_id","content","status","likeCount","replyCount","createdAt","updatedAt"]},"ObjectId":{"type":"object","properties":{}},"CreateCommentDto":{"type":"object","properties":{"content":{"type":"string","example":"This is a great post!"},"post":{"example":"507f1f77bcf86cd799439011","allOf":[{"$ref":"#/components/schemas/ObjectId"}]},"parent":{"type":"object","example":"507f1f77bcf86cd799439011"},"status":{"type":"string","example":"ACTIVE","enum":["ACTIVE","SPAM"]}},"required":["content","post"]},"UpdateCommentDto":{"type":"object","properties":{"content":{"type":"string","example":"This is a great post!"},"parent":{"type":"object","example":"507f1f77bcf86cd799439011"},"status":{"type":"string","example":"ACTIVE","enum":["ACTIVE","SPAM"]}}},"LikePostDto":{"type":"object","properties":{"postId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"MongoDB ObjectId of the post to like","format":"ObjectId"}},"required":["postId"]},"LikeResponseDto":{"type":"object","properties":{"_id":{"type":"string","example":"507f1f77bcf86cd799439011","description":"Unique identifier of the like","format":"ObjectId"},"user":{"type":"string","example":"507f1f77bcf86cd799439011","description":"ID of the user who created the like","format":"ObjectId"},"likeType":{"type":"string","example":"POST","enum":["POST","COMMENT"],"description":"Type of entity being liked (POST or COMMENT)"},"targetId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"ID of the target entity (post or comment) being liked","format":"ObjectId"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z","description":"Timestamp when the like was created"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-01T00:00:00.000Z","description":"Timestamp when the like was last updated"}},"required":["_id","user","likeType","targetId","createdAt","updatedAt"]},"LikeCommentDto":{"type":"object","properties":{"commentId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"MongoDB ObjectId of the comment to like","format":"ObjectId"}},"required":["commentId"]},"UnlikePostDto":{"type":"object","properties":{"postId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"MongoDB ObjectId of the post to unlike","format":"ObjectId"}},"required":["postId"]},"UnlikeCommentDto":{"type":"object","properties":{"commentId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"MongoDB ObjectId of the comment to unlike","format":"ObjectId"}},"required":["commentId"]},"LikeCountResponseDto":{"type":"object","properties":{"count":{"type":"number","example":42,"description":"Total number of likes for the entity","minimum":0},"isLiked":{"type":"boolean","example":true,"description":"Whether the current user has liked this entity"}},"required":["count","isLiked"]},"PresignedUrlRequestDto":{"type":"object","properties":{"fileType":{"type":"string","description":"File type/MIME type","example":"image/jpeg"},"folder":{"type":"string","description":"Folder path in S3 bucket","example":"profile-pictures"},"keyCount":{"type":"number","description":"Number of keys to generate","example":1,"minimum":1,"maximum":10},"oldKeys":{"description":"Old keys to delete (for replacement)","example":["old-image-key.jpg"],"type":"array","items":{"type":"string"}}},"required":["fileType","folder","keyCount"]},"PublicUploadResponseDto":{"type":"object","properties":{"key":{"type":"string","description":"S3 object key","example":"profile-pictures/user-123-abc.jpg"},"presignedUrl":{"type":"string","description":"Presigned URL for upload","example":"https://bucket.s3.region.amazonaws.com/key?signature=..."},"publicUrl":{"type":"string","description":"Public URL to access the uploaded file","example":"https://bucket.s3.region.amazonaws.com/profile-pictures/user-123-abc.jpg"}},"required":["key","presignedUrl","publicUrl"]},"PresignedUrlResponseDto":{"type":"object","properties":{"key":{"type":"string","description":"S3 object key","example":"profile-pictures/user-123-abc.jpg"},"presignedUrl":{"type":"string","description":"Presigned URL for upload","example":"https://bucket.s3.region.amazonaws.com/key?signature=..."}},"required":["key","presignedUrl"]},"DeleteFilesRequestDto":{"type":"object","properties":{"keys":{"description":"Array of S3 keys to delete","example":["profile-pictures/user-123-abc.jpg","posts/post-456-def.jpg"],"type":"array","items":{"type":"string"}}},"required":["keys"]},"FileUrlResponseDto":{"type":"object","properties":{"url":{"type":"string","description":"File URL","example":"https://bucket.s3.region.amazonaws.com/profile-pictures/user-123-abc.jpg"}}}}}}